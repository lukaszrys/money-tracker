gradle.taskGraph.afterTask { Task task, TaskState state ->
    if (state.failure) {
        println "failed"
    } else {
        println "done"
    }
}